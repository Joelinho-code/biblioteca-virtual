<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca de Tesis - IUTTOL</title>
    <link rel="stylesheet" href="css/principal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .stats-container {
            display: flex;
            justify-content: space-around;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        .stat-card {
            background: #fff;
            border-radius: 8px;
            padding: 1.5rem;
            width: 22%;
            min-width: 200px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 0.5rem;
        }
        .stat-card h3 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }
        .stat-card p {
            font-size: 2rem;
            font-weight: bold;
            color: #3498db;
            margin: 0;
        }
    </style>
</head>

<body>
    <header>
        <div class="logo">
            <img src="image/logo_iutol_400x400-removebg-preview.png" alt="Logo IUTTOL">
            <div class="header-text">
                <h1>Biblioteca Digital de Tesis</h1>
                <h2>Instituto Universitario de Tecnología "Tomás Lander"</h2>
            </div>
        </div>
        <p>Recursos académicos para estudiantes de Administración, Contaduría, Informática y Educación Preescolar</p>
        <p class="info-link" onclick="abrirInformacion()"><i class="fas fa-info-circle"></i> Más información sobre las carreras</p>
    </header>

    <nav class="main-nav">
        <ul>
            <li><a href="index.html" class="active"><i class="fas fa-home"></i> Inicio</a></li>
            <li><a href="consultas.html"><i class="fas fa-search"></i> Consultar TEGs</a></li>
            <li><a href="formulario.html"><i class="fas fa-sign-in-alt"></i> Acceso Administrativo</a></li>
        </ul>
    </nav>

    <main>
        <section class="hero">
            <h2>Repositorio Digital de Trabajos Especiales de Grado</h2>
            <p>Accede a nuestra colección de trabajos de investigación realizados por nuestros estudiantes</p>
            <div class="hero-buttons">
                <a href="consultas.html" class="btn primary"><i class="fas fa-search"></i> Buscar TEGs</a>
                <a href="#carreras" class="btn secondary"><i class="fas fa-book-open"></i> Ver Pensum de Carreras</a>
            </div>
        </section>

        <div class="stats-container" id="stats-container">
            <!-- Estadísticas se cargarán con JavaScript -->
        </div>

        <section id="carreras" class="carreras-section">
            <h2>Explora por Carreras</h2>
            <div class="carreras-grid">
                <div class="carrera-card">
                    <i class="fas fa-briefcase"></i>
                    <h3>Administración</h3>
                    <p>Gestión empresarial y desarrollo organizacional</p>
                    <button onclick="mostrarPensum('Administración')" class="btn small pensum-btn">
                        <i class="fas fa-file-alt"></i> Ver Pensum
                    </button>
                </div>
                <div class="carrera-card">
                    <i class="fas fa-calculator"></i>
                    <h3>Contaduría</h3>
                    <p>Análisis financiero y control fiscal</p>
                    <button onclick="mostrarPensum('Contaduría')" class="btn small pensum-btn">
                        <i class="fas fa-file-alt"></i> Ver Pensum
                    </button>
                </div>
                <div class="carrera-card">
                    <i class="fas fa-laptop-code"></i>
                    <h3>Informática</h3>
                    <p>Desarrollo tecnológico e innovación</p>
                    <button onclick="mostrarPensum('Informática')" class="btn small pensum-btn">
                        <i class="fas fa-file-alt"></i> Ver Pensum
                    </button>
                </div>
                <div class="carrera-card">
                    <i class="fas fa-child"></i>
                    <h3>Educación Preescolar</h3>
                    <p>Formación integral en primera infancia</p>
                    <button onclick="mostrarPensum('Educación Preescolar')" class="btn small pensum-btn">
                        <i class="fas fa-file-alt"></i> Ver Pensum
                    </button>
                </div>
            </div>
        </section>

        <section class="info-cards">
            <div class="card">
                <h2><i class="fas fa-map-marker-alt"></i> Dirección</h2>
                <p>Estamos ubicados en:</p>
                <address>
                    Av. José Félix Ribas, Edif. Universitario, Piso 01, Apt. 01,<br>
                    Sector Casco Central<br>
                    Parroquia: Ocumare Del Tuy<br>
                    Municipio: Lander<br>
                    Estado: Miranda<br>
                    Venezuela.
                </address>
            </div>

            <div class="card">
                <h2><i class="fas fa-address-book"></i> Contacto</h2>
                <ul class="contact-list">
                    <li><i class="fas fa-phone"></i> <strong>Teléfono:</strong> (0239) 225 9474</li>
                    <li><i class="fas fa-envelope"></i> <strong>Email:</strong> biblioteca@iuttol.edu.ve</li>
                    <li><i class="fas fa-calendar-alt"></i> <strong>Horario de atención:</strong> Martes, Miercoles y Viernes, 8:00 AM - 12:00 PM</li>
                </ul>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Biblioteca Digital</h3>
                <p>Repositorio institucional de trabajos especiales de grado del IUTTOL.</p>
            </div>
            <div class="footer-section">
                <h3>Enlaces Rápidos</h3>
                <ul>
                    <li><a href="consultas.html">Buscar TEGs</a></li>
                    <li><a href="formulario.html">Acceso administrativo</a></li>
                    <li><a href="https://www.instagram.com/iuttol_98/">Instagram</a></li>
                    <li><a href="https://www.facebook.com/iuttomaslander/?locale=es_LA">Facebook</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contacto</h3>
                <p>biblioteca@iuttol.edu.ve</p>
                <p>(0239) 225 9474</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Instituto Universitario de Tecnología "Tomás Lander". Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Modal de información -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal()">&times;</span>
            <h2>Información sobre las Carreras</h2>
            <div class="carrera-info">
                <!-- Contenido del modal se mantiene igual -->
            </div>
        </div>
    </div>

    <!-- Modal para mostrar el pensum -->
    <div id="pensumModal" class="modal">
        <div class="modal-content pensum-content">
            <span class="close" onclick="cerrarPensum()">&times;</span>
            <h2 id="pensumTitle">Pensum de Carrera</h2>
            <div class="pensum-container">
                <img id="pensumImage" src="" alt="Pensum de la carrera" class="pensum-image">
                <div class="pensum-actions">
                    <a href="#" id="downloadPensum" class="btn primary" download>
                        <i class="fas fa-download"></i> Descargar Pensum
                    </a>
                    <button onclick="cerrarPensum()" class="btn secondary">
                        <i class="fas fa-times"></i> Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import supabase from './js/supabase-client.js'
        
        // Funciones del modal (se mantienen igual)
        function abrirInformacion() {
            document.getElementById("myModal").style.display = "block";
        }
        function cerrarModal() {
            document.getElementById("myModal").style.display = "none";
        }
        function mostrarPensum(carrera) {
            document.getElementById("pensumModal").style.display = "block";
            document.getElementById("pensumTitle").textContent = `Pensum de ${carrera}`;
            const pensumImage = document.getElementById("pensumImage");
            pensumImage.src = `image/pensum-${carrera.toLowerCase().replace(/ /g, '-')}.jpg`;
            pensumImage.alt = `Pensum de ${carrera}`;
        }
        function cerrarPensum() {
            document.getElementById("pensumModal").style.display = "none";
        }

        // Cargar estadísticas
        async function loadStats() {
            // Total de TEGs
            const { count: totalTEGs } = await supabase
                .from('teg')
                .select('*', { count: 'exact' })
            
            // TEGs por carrera
            const { data: tegsByCareer } = await supabase
                .from('teg')
                .select('carrera_id, carreras(nombre)')
                .eq('estatus', 'Vigente')
            
            const statsContainer = document.getElementById('stats-container')
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <h3>Total de TEGs</h3>
                    <p>${totalTEGs}</p>
                </div>
                <div class="stat-card">
                    <h3>Administración</h3>
                    <p>${tegsByCareer.filter(t => t.carrera_id === 1).length}</p>
                </div>
                <div class="stat-card">
                    <h3>Contaduría</h3>
                    <p>${tegsByCareer.filter(t => t.carrera_id === 2).length}</p>
                </div>
                <div class="stat-card">
                    <h3>Informática</h3>
                    <p>${tegsByCareer.filter(t => t.carrera_id === 3).length}</p>
                </div>
                <div class="stat-card">
                    <h3>Educación Preescolar</h3>
                    <p>${tegsByCareer.filter(t => t.carrera_id === 4).length}</p>
                </div>
            `
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadStats()
        })
    </script>
</body>
</html>